package obopentest_task

import (
	obpocketChaos "ob-open-test/obopentest-chaos"
	obopentestOB "ob-open-test/obopentest-ob"
	"time"
)

//组件，包装ob-operator,chaos,workbench
type Model interface {
	//模块名
	GetName() string
	//初始化配置，需要进行初期检查

	SetConf(map[string]string) error
	//开始
	Start()
	//逆向销毁
	Destory()
	//等待时间，用于waitEnd的超时等待命令
	GetStatusTime() time.Duration
	//此处可用context代替
	WaitEnd(timeout time.Duration) int
}

func NewMode(modelName string) Model {
	switch modelName {
	case "ob-operator":
		return obopentestOB.NewOBModel()
	case "chaosblade":
		return obpocketChaos.NewChaosModel()
	default:
		return nil
	}
}
